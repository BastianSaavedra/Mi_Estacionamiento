{% extends 'mi_estacionamiento/base_web.html' %}
{% block content %}
<head>
  <!-- CSS MAP-BOX -->
  <script src='https://api.mapbox.com/mapbox-gl-js/v2.3.0/mapbox-gl.js'></script>
  <link href='https://api.mapbox.com/mapbox-gl-js/v2.3.0/mapbox-gl.css' rel='stylesheet' />
</head>
<body>

  <form method="POST">
  {% csrf_token %}
    {{ form }}
    <input type="submit" value"submit address"></input>
  </form>

  <div id='map' style='width: 100%; height: 600px;'></div>
  <script>
    mapboxgl.accessToken = '{{ mapbox_access_token }}';
    var map = new mapboxgl.Map({
      container: 'map', // container ID
      style: 'mapbox://styles/mapbox/streets-v11', // style URL
      center: [-70.64827, -33.45694 ], // starting position [lng, lat]
      zoom: 9 // starting zoom
    });
    {% for address in addresses %}
    var marker = new mapboxgl.Marker()
      .setLngLat([{{ address.long }}, {{ address.lat }}])
      .setPopup(new mapboxgl.Popup().setHTML("<p>{{ address.address }}</p>"))
      .addTo(map);
    {% endfor %}
    
  </script>
</body>

{% endblock %}

